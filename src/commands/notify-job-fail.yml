description: >
  This command echos "Hello World" using file inclusion.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  mentions:
    type: string
    default: ''
    description: >
      Mention users via the @ symbol: "@USER"

      If the username contains a space, the Slack ID must be used with angled
      brackets: "<@U8XXXXXXX>"
steps:
  - official-slack/notify:
      event: fail
      mentions: << parameters.mentions >>
      custom: |
        {"blocks":[{"type":"header","text":{"type":"plain_text","text":"Job Failed. :interrobang:","emoji":true}},
        {"type":"section","fields":[{"type":"mrkdwn","text":"*Job*: ${CIRCLE_JOB} ${_ICON} "}]},
        {"type":"section","fields":[{"type":"mrkdwn","text":"*Project*: $CIRCLE_PROJECT_REPONAME"},
        {"type":"mrkdwn","text":"*Branch*: $BRANCH_NAME"},{"type":"mrkdwn","text":"*Commit*: $CIRCLE_SHA1"},
        {"type":"mrkdwn","text":"*Author*: $CIRCLE_USERNAME"}]},
        {"type":"actions","elements":[{"type":"button","text":{"type":"plain_text","text":"View Job"},"url":"${CIRCLE_BUILD_URL}"}]}]}
